{
  // A general quest pool for vore-related quests

  "ends" : [
    [0.3, "sbq_fetch_belly"],
    [0.25, "sbq_escort_vore"]
  ],

  "quests" : {
    "sbq_fetch_belly" : {
      "templateId" : "sbq_fetch_belly.generated",
      "difficulty" : 0.1,
      "participants" : {
        "questGiver" : {
          "turnInQuest" : true,
          "behaviorOverrides" : [
            {
              "type" : "idle",
              "behavior" : { "name" : "quest-stay_at_home-idle" }
            }
          ]
        }
      },

      "merging" : {
        "output" : "fetchedItems"
      },

      "preconditions" : [
        // Quest giver must be capable of some sort of belly vore
        ["sbq_voreTypeBelly", "bellyVore"],
        ["sbq_isPred", "questGiver", "bellyVore"],
        
        // Pick out an itemList for what the player will find inside
        ["sbq_isInedibleJunk", "fetchedItems"]
        
        // In theory, the "output" above should allow these items to appear later in a quest chain...
        
        // TODO - Find some way to include one or more of the fetchedItems in postconditions for quest chains (assuming output isn't doing it)
        // It seems that itemList can't actually nail down a selection on its own. It will return possible predicands, but the quest generator just won't actually choose one
        // Existing SB quests seem to primarily use it to create a new itemList
        //["itemList", "fetchedItems", "item", "count"],
        //[">=", "count", 1],
        // Would, in theory, work with quest chaining but can't actually check if you have the item or not
        //["!owns", "player", "item", "count"]
      ],
      "postconditions" : [
        // The player's ownership of the random item could be used in a future quest
        // In theory, ownsItemList should be useful here, but it seems to be hard-coded to only allow the player to NOT have the items by the postconditions?
        //["owns", "player", "item", "count"]
      ]
    },

    "sbq_escort_vore" : {
      "templateId" : "sbq_escort_vore.generated",
      "difficulty" : 0.2,
      "participants" : {
        "questGiver" : {
          "turnInQuest" : true
        }
      },

      "managerPlugins" : [
        {
          "script" : "/scripts/quest/manager/spawn_entities.lua",
          "pluginClass" : "SpawnEntities",
          "pluginConfig" : {
            "group" : "targets",
            "spawnCount" : 1,
            "positionParameter" : "spawnPoint",
            "persistent" : true,
            "spawnParameter" : "targetNpcType",

            "addEntityParameter" : "target",
            "relationships" : [
              ["likes", false, "questGiver"],
              ["likes", true, "questGiver"]
            ],
            "participantDef" : {
              "critical" : true,
              "behaviorOverrides" : [
                // Basically just makes the NPC respond with new dialogue when interacted with
                {
                  "type" : "notification",
                  "behavior" : {
                    "name" : "quest-sbq-escort-vore-notification"
                  }
                },
                // Makes the NPC stand still, sad
                {
                  "type" : "idle",
                  "behavior" : {
                    "name" : "quest-kidnapping-idle"
                  }
                }
              ]
            }
          }
        }
      ],

      "preconditions" : [
        // Increased minimum distance from 90 so you have to go a little farther
        ["findLocation", "spawnPoint", "locationTags", 120, -1],
        ["tagSetContains", "locationTags", {"literal":"friendly"}],

        // Pick ANY random species... may not even be installed!
        ["sbq_speciesAny", "species"],
        // Make sure the chosen species IS installed, then pass THAT one to the NPC generator
        ["sbq_speciesValidate", "species", "validSpecies"],
        ["seededNpcType", "targetNpcType", "validSpecies", {"literal":"sbqVoreVillager"}, {
          "damageTeamType" : "assistant"
        }]
      ],
      "postconditions" : [
      ]
    }
  }

}
